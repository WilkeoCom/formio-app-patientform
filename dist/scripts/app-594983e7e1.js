!function(){"use strict";angular.module("patientforms",["ngSanitize","ngAria","ui.router","ui.bootstrap","toastr","pascalprecht.translate","formio","ngFormioHelper"])}(),angular.module("patientforms").provider("PatientResource",function(){return{$get:function(){return null},templates:{create:"views/patient/create.html",index:"views/patient/index.html","abstract":"views/patient/patient.html",view:"views/patient/view.html"},controllers:{create:["$scope","uiDatetimePickerConfig",function(e,t){t.buttonBar.now.text="Maintenant",t.buttonBar.today.text="Aujourd'hui",t.buttonBar.clear.text="Effacer",t.buttonBar.date.text="Date",t.buttonBar.time.text="Heure",t.buttonBar.close.text="Fermer"}],index:["$scope","Formio","i18nService",function(e,t,r){r.setCurrentLang("fr");var i='<formio-grid-cell class="ui-grid-cell-contents" data="COL_FIELD" component="col.colDef.component"></formio-grid-cell>';e.currentResource.gridOptions={columnDefs:[{cellTemplate:'<a style="cursor:pointer;" ng-click="grid.appScope.buttonClick(\'rowView\', row)">'+i+"</a>",displayName:"PrÃ©nom",enableFiltering:!0,field:"data.firstName",minWidth:100},{displayName:"Nom",enableFiltering:!0,field:"data.lastName",minWidth:120},{displayName:"Sexe",enableFiltering:!1,field:"data.gender",maxWidth:70},{displayName:"Age",enableFiltering:!1,field:"data.age",maxWidth:75},{displayName:"Taille",enableFiltering:!1,field:"data.height",maxWidth:75},{displayName:"Poids",enableFiltering:!1,field:"data.weight",maxWidth:75},{displayName:"WOMAC",enableFiltering:!1,field:"data.score"},{displayName:"IKDC",enableFiltering:!1,field:"data.scoreIKDC"},{displayName:"Remarque",enableFiltering:!1,field:"data.note",minWidth:250}],customAction:function(r){return new Promise(function(i){var n=function(e,t){return e.filter(function(e){return e.data&&e.data.patient._id===t._id})},a=function(e,t){var r=_.filter(e,function(e){return angular.isDefined(e.data[t])});return 0==r.length?[]:r.map(function(e){return e.data[t]})},o=function(e,t,r){var i=a(r,t);i.length>0&&(e.data[t]=i.join("/"))};e.formsSrc=t.getProjectUrl()+"/form";var s={type:"form",tags:"patient",name__regex:"/^womacIndex|ikdc|quickDash|/i"};new t(e.formsSrc).loadForms({params:s}).then(function(a){if(a&&a.length>0){var s=r.gridOptionsDef.data.map(function(e){return e._id}),l={};l["data.patient._id__in"]=s.join(","),l.limit=r.query.limit;var u=[];angular.forEach(a,function(i){var n=e.formsSrc+"/"+i._id,a=new t(n);u.push(a.loadSubmissions({params:l},r.gridOptionsDef.loadOptions))}),Promise.all(u).then(function(e){e&&e.length>0&&angular.forEach(r.gridOptionsDef.data,function(t){t&&angular.forEach(e,function(e){var r=n(e,t);o(t,"score",r),o(t,"scoreIKDC",r),o(t,"scoreQuickDASH",r)})}),i()})}})})}}}],view:["$scope","$stateParams","Formio","i18nService",function(e,t,r,i){i.setCurrentLang("fr"),e.kneeInterventionForm=null,e.formsSrc=r.getProjectUrl()+"/form";var n={type:"form",limit:1,tags:"patient",name__regex:"/^kneeIntervention/i"};new r(e.formsSrc).loadForms({params:n}).then(function(t){t&&t.length>0&&(e.kneeInterventionForm=t[0],e.kneeInterventionForm.url=e.formsSrc+"/"+e.kneeInterventionForm._id)}),e.submissionQuery={},e.submissionQuery["data.patient._id"]=t.patientId}]}}}),function(){"use strict";function e(e,t,r,i){i.init(),t.config=r,angular.forEach(r.forms,function(e,r){t[r]=e}),e.debug("runBlock end")}e.$inject=["$log","$rootScope","AppConfig","FormioAuth"],angular.module("patientforms").run(e)}(),function(){"use strict";function e(e,t,r,i,n,a){e.state("home",{url:"/?",templateUrl:"views/home.html"}),angular.forEach(n.resources,function(e,t){r.register(t,e.form,a.get(e.resource+"Provider"))}),i.register("patient",n.appUrl,{field:[{name:"patient",stateParam:"patientId"}],base:"patient.",tag:"patient"}),t.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider","FormioResourceProvider","FormioFormsProvider","AppConfig","$injector"],angular.module("patientforms").config(e)}(),function(){"use strict";angular.module("patientforms").constant("moment",moment)}(),function(){"use strict";function e(e,t,r,i,n,a){a.hashPrefix(""),t.setBaseUrl(i.apiUrl),t.setAppUrl(i.appUrl),r.setStates("auth.login","home"),r.setForceAuth(!0),r.register("login","user"),r.register("register","user"),e.allowHtml=!0,e.timeOut=3e3,e.positionClass="toast-top-right",e.preventDuplicates=!0,e.progressBar=!0,n.useStaticFilesLoader({prefix:"/languages/locale-",suffix:".json"}),n.preferredLanguage("fr"),n.useSanitizeValueStrategy("escape")}e.$inject=["toastrConfig","FormioProvider","FormioAuthProvider","AppConfig","$translateProvider","$locationProvider"],angular.module("patientforms").config(e)}();
//# sourceMappingURL=../maps/scripts/app-594983e7e1.js.map
