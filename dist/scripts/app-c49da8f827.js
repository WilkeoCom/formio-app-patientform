!function(){"use strict";angular.module("patientforms",["ngSanitize","ngAria","ui.router","ui.bootstrap","toastr","pascalprecht.translate","ngMap","formio","ngFormioHelper"])}(),angular.module("patientforms").provider("PatientResource",function(){return{$get:function(){return null},templates:{create:"views/patient/create.html",index:"views/patient/index.html","abstract":"views/patient/patient.html",view:"views/patient/view.html"},controllers:{create:["$scope","uiDatetimePickerConfig",function(e,t){t.buttonBar.now.text="Maintenant",t.buttonBar.today.text="Aujourd'hui",t.buttonBar.clear.text="Effacer",t.buttonBar.date.text="Date",t.buttonBar.time.text="Heure",t.buttonBar.close.text="Fermer"}],index:["$scope","Formio","i18nService",function(e,t,r){r.setCurrentLang("fr");var n='<formio-grid-cell class="ui-grid-cell-contents" data="COL_FIELD" component="col.colDef.component"></formio-grid-cell>';e.currentResource.gridOptions={columnDefs:[{cellTemplate:'<a style="cursor:pointer;" ng-click="grid.appScope.buttonClick(\'rowView\', row)">'+n+"</a>",displayName:"PrÃ©nom",enableFiltering:!0,field:"data.firstName"},{displayName:"Nom",enableFiltering:!0,field:"data.lastName"},{displayName:"Sexe",enableFiltering:!1,field:"data.gender"},{displayName:"Age",enableFiltering:!1,field:"data.age"},{displayName:"Taille",enableFiltering:!1,field:"data.height"},{displayName:"Poids",enableFiltering:!1,field:"data.weight"},{displayName:"WOMAC",enableFiltering:!1,field:"data.score"},{displayName:"IKDC",enableFiltering:!1,field:"data.scoreIKDC"},{displayName:"Quick DASH",enableFiltering:!1,field:"data.scoreQuickDASH"}],customAction:function(r){return new Promise(function(n){var i=function(e,t){return e.filter(function(e){return e.data&&e.data.patient._id===t._id})},a=function(e,t){var r=_.filter(e,function(e){return angular.isDefined(e.data[t])});return 0==r.length?[]:r.map(function(e){return e.data[t]})},o=function(e,t,r){var n=a(r,t);n.length>0&&(e.data[t]=n.join("/"))};e.formsSrc=t.getProjectUrl()+"/form";var s={type:"form",tags:"patient",name__regex:"/^womacIndex|ikdc|quickDash|/i"};new t(e.formsSrc).loadForms({params:s}).then(function(a){if(a&&a.length>0){var s=r.gridOptionsDef.data.map(function(e){return e._id}),l={};l["data.patient._id__in"]=s.join(",");var u=[];angular.forEach(a,function(n){var i=e.formsSrc+"/"+n._id,a=new t(i);u.push(a.loadSubmissions({params:l},r.gridOptionsDef.loadOptions))}),Promise.all(u).then(function(e){e&&e.length>0&&angular.forEach(r.gridOptionsDef.data,function(t){t&&angular.forEach(e,function(e){var r=i(e,t);o(t,"score",r),o(t,"scoreIKDC",r),o(t,"scoreQuickDASH",r)})}),n()})}})})}}}],view:["$scope","$stateParams","Formio","i18nService",function(e,t,r,n){n.setCurrentLang("fr"),e.kneeInterventionForm=null,e.formsSrc=r.getProjectUrl()+"/form";var i={type:"form",limit:1,tags:"patient",name__regex:"/^kneeIntervention/i"};new r(e.formsSrc).loadForms({params:i}).then(function(t){t&&t.length>0&&(e.kneeInterventionForm=t[0],e.kneeInterventionForm.url=e.formsSrc+"/"+e.kneeInterventionForm._id)}),e.submissionQuery={},e.submissionQuery["data.patient._id"]=t.patientId}]}}}),function(){"use strict";function e(e,t,r,n){n.init(),t.config=r,angular.forEach(r.forms,function(e,r){t[r]=e}),e.debug("runBlock end")}e.$inject=["$log","$rootScope","AppConfig","FormioAuth"],angular.module("patientforms").run(e)}(),function(){"use strict";function e(e,t,r,n,i,a){e.state("home",{url:"/?",templateUrl:"views/home.html"}),angular.forEach(i.resources,function(e,t){r.register(t,e.form,a.get(e.resource+"Provider"))}),n.register("patient",i.appUrl,{field:[{name:"patient",stateParam:"patientId"}],base:"patient.",tag:"patient"}),t.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider","FormioResourceProvider","FormioFormsProvider","AppConfig","$injector"],angular.module("patientforms").config(e)}(),function(){"use strict";angular.module("patientforms").constant("moment",moment)}(),function(){"use strict";function e(e,t,r,n,i,a){a.hashPrefix(""),t.setBaseUrl(n.apiUrl),t.setAppUrl(n.appUrl),r.setStates("auth.login","home"),r.setForceAuth(!0),r.register("login","user"),r.register("register","user"),e.allowHtml=!0,e.timeOut=3e3,e.positionClass="toast-top-right",e.preventDuplicates=!0,e.progressBar=!0,i.useStaticFilesLoader({prefix:"/languages/locale-",suffix:".json"}),i.preferredLanguage("fr"),i.useSanitizeValueStrategy("escape")}e.$inject=["toastrConfig","FormioProvider","FormioAuthProvider","AppConfig","$translateProvider","$locationProvider"],angular.module("patientforms").config(e)}();
//# sourceMappingURL=../maps/scripts/app-c49da8f827.js.map
